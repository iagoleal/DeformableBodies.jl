<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial · DeformableBodies.jl</title><link rel="canonical" href="https://iagoleal.github.io/DeformableBodies.jl/dev/tutorial-cubecopter/index.html"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img class="docs-light-only" src="../assets/logo.svg" alt="DeformableBodies.jl logo"/><img class="docs-dark-only" src="../assets/logo-dark.svg" alt="DeformableBodies.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">DeformableBodies.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Tutorial</a></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../ref-quaternions/">Quaternions</a></li><li><a class="tocitem" href="../ref-models/">DeformableBodies</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/iagoleal/DeformableBodies.jl/blob/master/docs/src/tutorial-cubecopter.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial:-The-Cubecopter-1"><a class="docs-heading-anchor" href="#Tutorial:-The-Cubecopter-1">Tutorial: The Cubecopter</a><a class="docs-heading-anchor-permalink" href="#Tutorial:-The-Cubecopter-1" title="Permalink"></a></h1><p>In this page we model the movement of a simple deformable body on a reference frame moving with it and then solve the problem to find its trajectory from the point of view of an inertial frame.</p><p>The example body will be a cube attached to rotating helix, from now on comradely referred to as the <em>cubecopter</em>. Each particle is represented by a <a href="../ref-models/#DeformableBodies.PointMass"><code>PointMass</code></a>, and the full body is an array of point masses.</p><pre><code class="language-julia">r_0 = [
      PointMass(1., [ 1.,  1.,  0.])
    , PointMass(1., [ 1., -1.,  0.])
    , PointMass(1., [-1.,  1.,  0.])
    , PointMass(1., [-1., -1.,  0.])
    , PointMass(1., [ 1.,  1., -1.])
    , PointMass(1., [ 1., -1., -1.])
    , PointMass(1., [-1.,  1., -1.])
    , PointMass(1., [-1., -1., -1.])
    , PointMass(.5, [-1.,  0.,  .5])
    , PointMass(.5, [ 1.,  0.,  .5])
    ]</code></pre><p>For visualization purposes, the <code>plot</code> function from <code>Plots.jl</code> is overloaded to work with arrays of point masses.</p><pre><code class="language-julia">using Plots: plot
plot(r_0)</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="400" height="400" viewBox="0 0 1600 1600">
<defs>
  <clipPath id="clip0000">
    <rect x="0" y="0" width="1600" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip0000)" d="
M0 1600 L1600 1600 L1600 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip0001">
    <rect x="320" y="160" width="1121" height="1121"/>
  </clipPath>
</defs>
<defs>
  <clipPath id="clip0002">
    <rect x="86" y="47" width="1467" height="1475"/>
  </clipPath>
</defs>
<path clip-path="url(#clip0002)" d="
M86.9921 1433.95 L86.9921 308.423 L623.499 47.2441 L1552.76 134.304 L1552.76 1259.83 L1016.25 1521.01 L86.9921 1433.95  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  113.292,1436.41 649.799,1175.23 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  649.799,1175.23 649.799,49.708 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  332.456,1456.95 868.963,1195.77 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  868.963,1195.77 868.963,70.241 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  551.621,1477.48 1088.13,1216.3 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1088.13,1216.3 1088.13,90.7739 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  770.785,1498.01 1307.29,1236.83 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1307.29,1236.83 1307.29,111.307 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  989.949,1518.54 1526.46,1257.36 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1526.46,1257.36 1526.46,131.84 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1031.43,1513.62 102.176,1426.56 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  102.176,1426.56 102.176,301.031 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1157.97,1452.02 228.711,1364.96 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  228.711,1364.96 228.711,239.432 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1284.5,1390.42 355.246,1303.36 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  355.246,1303.36 355.246,177.834 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1411.04,1328.82 481.78,1241.76 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  481.78,1241.76 481.78,116.235 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1537.57,1267.22 608.315,1180.16 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  608.315,1180.16 608.315,54.636 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  86.9921,1331.31 623.499,1070.13 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  623.499,1070.13 1552.76,1157.19 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  86.9921,1118.94 623.499,857.764 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  623.499,857.764 1552.76,944.823 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  86.9921,906.58 623.499,645.401 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  623.499,645.401 1552.76,732.46 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  86.9921,694.216 623.499,433.037 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  623.499,433.037 1552.76,520.097 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  86.9921,481.853 623.499,220.674 
  "/>
<polyline clip-path="url(#clip0002)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  623.499,220.674 1552.76,307.734 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  86.9921,1433.95 1016.25,1521.01 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1016.25,1521.01 1552.76,1259.83 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  86.9921,1433.95 86.9921,308.423 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  113.292,1436.41 119.73,1433.28 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  332.456,1456.95 338.894,1453.81 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  551.621,1477.48 558.059,1474.34 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  770.785,1498.01 777.223,1494.88 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  989.949,1518.54 996.387,1515.41 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1031.43,1513.62 1020.28,1512.57 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1157.97,1452.02 1146.82,1450.97 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1284.5,1390.42 1273.35,1389.37 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1411.04,1328.82 1399.89,1327.77 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1537.57,1267.22 1526.42,1266.18 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  86.9921,1331.31 93.4302,1328.17 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  86.9921,1118.94 93.4302,1115.81 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  86.9921,906.58 93.4302,903.445 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  86.9921,694.216 93.4302,691.082 
  "/>
<polyline clip-path="url(#clip0000)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  86.9921,481.853 93.4302,478.719 
  "/>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 97.2919, 1486.41)" x="97.2919" y="1486.41">-1.0</text>
</g>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 316.456, 1506.95)" x="316.456" y="1506.95">-0.5</text>
</g>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 535.621, 1527.48)" x="535.621" y="1527.48">0.0</text>
</g>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 754.785, 1548.01)" x="754.785" y="1548.01">0.5</text>
</g>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 973.949, 1568.54)" x="973.949" y="1568.54">1.0</text>
</g>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 1047.43, 1563.62)" x="1047.43" y="1563.62">-1.0</text>
</g>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 1173.97, 1502.02)" x="1173.97" y="1502.02">-0.5</text>
</g>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 1300.5, 1440.42)" x="1300.5" y="1440.42">0.0</text>
</g>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 1427.04, 1378.82)" x="1427.04" y="1378.82">0.5</text>
</g>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 1553.57, 1317.22)" x="1553.57" y="1317.22">1.0</text>
</g>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:end;" transform="rotate(0, 70.9921, 1348.81)" x="70.9921" y="1348.81">-0.9</text>
</g>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:end;" transform="rotate(0, 70.9921, 1136.44)" x="70.9921" y="1136.44">-0.6</text>
</g>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:end;" transform="rotate(0, 70.9921, 924.08)" x="70.9921" y="924.08">-0.3</text>
</g>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:end;" transform="rotate(0, 70.9921, 711.716)" x="70.9921" y="711.716">0.0</text>
</g>
<g clip-path="url(#clip0000)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:end;" transform="rotate(0, 70.9921, 499.353)" x="70.9921" y="499.353">0.3</text>
</g>
<circle clip-path="url(#clip0002)" cx="1511.27" cy="525.025" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0002)" cx="1005.13" cy="771.42" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0002)" cx="634.614" cy="442.893" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0002)" cx="128.476" cy="689.288" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0002)" cx="1511.27" cy="1232.9" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0002)" cx="1005.13" cy="1479.3" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0002)" cx="634.614" cy="1150.77" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0002)" cx="128.476" cy="1397.17" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0002)" cx="381.545" cy="212.152" r="7" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0002)" cx="1258.2" cy="294.284" r="7" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
</svg>
<p>It may be hard to visualize a lot of points scattered on a 3D graph. Therefore, the <code>plot</code> function is also overloaded to accept a parameter <code>bodylines</code> connecting some particles. It <strong>does not</strong> interferes on the dynamics and serves only for aiding visualization.</p><p>Below is a nasty hack for calculating the cubecopter&#39;s edges. You do not have to understand it. The important part is that the variable <code>edges</code> is an array of <em>indexes</em> representing which points should be connected.</p><pre><code class="language-julia">edges = Tuple[]
for i = 1:length(r_0), j = i:length(r_0)
    if count(a -&gt; first(a) == last(a), zip(pos(r_0[i]),pos(r_0[j]))) == 2
        push!(edges, (i,j))
    end
end</code></pre><pre><code class="language-julia">plot(r_0, bodylines=edges)</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="400" height="400" viewBox="0 0 1600 1600">
<defs>
  <clipPath id="clip0600">
    <rect x="0" y="0" width="1600" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip0600)" d="
M0 1600 L1600 1600 L1600 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip0601">
    <rect x="320" y="160" width="1121" height="1121"/>
  </clipPath>
</defs>
<defs>
  <clipPath id="clip0602">
    <rect x="78" y="47" width="1475" height="1475"/>
  </clipPath>
</defs>
<path clip-path="url(#clip0602)" d="
M78.9921 1433.95 L78.9921 308.423 L618.427 47.2441 L1552.76 134.304 L1552.76 1259.83 L1013.32 1521.01 L78.9921 1433.95  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  105.435,1436.41 644.87,1175.23 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  644.87,1175.23 644.87,49.708 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  325.796,1456.95 865.231,1195.77 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  865.231,1195.77 865.231,70.241 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  546.157,1477.48 1085.59,1216.3 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1085.59,1216.3 1085.59,90.7739 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  766.517,1498.01 1305.95,1236.83 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1305.95,1236.83 1305.95,111.307 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  986.878,1518.54 1526.31,1257.36 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1526.31,1257.36 1526.31,131.84 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1028.59,1513.62 94.2592,1426.56 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  94.2592,1426.56 94.2592,301.031 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1155.81,1452.02 221.484,1364.96 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  221.484,1364.96 221.484,239.432 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1283.04,1390.42 348.71,1303.36 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  348.71,1303.36 348.71,177.834 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1410.26,1328.82 475.935,1241.76 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  475.935,1241.76 475.935,116.235 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1537.49,1267.22 603.16,1180.16 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  603.16,1180.16 603.16,54.636 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  78.9921,1331.31 618.427,1070.13 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  618.427,1070.13 1552.76,1157.19 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  78.9921,1118.94 618.427,857.764 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  618.427,857.764 1552.76,944.823 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  78.9921,906.58 618.427,645.401 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  618.427,645.401 1552.76,732.46 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  78.9921,694.216 618.427,433.037 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  618.427,433.037 1552.76,520.097 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  78.9921,481.853 618.427,220.674 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  618.427,220.674 1552.76,307.734 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  78.9921,1433.95 1013.32,1521.01 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1013.32,1521.01 1552.76,1259.83 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  78.9921,1433.95 78.9921,308.423 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  105.435,1436.41 111.909,1433.28 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  325.796,1456.95 332.269,1453.81 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  546.157,1477.48 552.63,1474.34 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  766.517,1498.01 772.99,1494.88 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  986.878,1518.54 993.351,1515.41 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1028.59,1513.62 1017.38,1512.57 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1155.81,1452.02 1144.6,1450.97 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1283.04,1390.42 1271.83,1389.37 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1410.26,1328.82 1399.05,1327.77 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1537.49,1267.22 1526.28,1266.18 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  78.9921,1331.31 85.4653,1328.17 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  78.9921,1118.94 85.4653,1115.81 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  78.9921,906.58 85.4653,903.445 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  78.9921,694.216 85.4653,691.082 
  "/>
<polyline clip-path="url(#clip0600)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  78.9921,481.853 85.4653,478.719 
  "/>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 89.4354, 1486.41)" x="89.4354" y="1486.41">-1.0</text>
</g>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 309.796, 1506.95)" x="309.796" y="1506.95">-0.5</text>
</g>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 530.157, 1527.48)" x="530.157" y="1527.48">0.0</text>
</g>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 750.517, 1548.01)" x="750.517" y="1548.01">0.5</text>
</g>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 970.878, 1568.54)" x="970.878" y="1568.54">1.0</text>
</g>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 1044.59, 1563.62)" x="1044.59" y="1563.62">-1.0</text>
</g>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 1171.81, 1502.02)" x="1171.81" y="1502.02">-0.5</text>
</g>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 1299.04, 1440.42)" x="1299.04" y="1440.42">0.0</text>
</g>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 1426.26, 1378.82)" x="1426.26" y="1378.82">0.5</text>
</g>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:middle;" transform="rotate(0, 1553.49, 1317.22)" x="1553.49" y="1317.22">1.0</text>
</g>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:end;" transform="rotate(0, 62.9921, 1348.81)" x="62.9921" y="1348.81">-0.9</text>
</g>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:end;" transform="rotate(0, 62.9921, 1136.44)" x="62.9921" y="1136.44">-0.6</text>
</g>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:end;" transform="rotate(0, 62.9921, 924.08)" x="62.9921" y="924.08">-0.3</text>
</g>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:end;" transform="rotate(0, 62.9921, 711.716)" x="62.9921" y="711.716">0.0</text>
</g>
<g clip-path="url(#clip0600)">
<text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:48px; text-anchor:end;" transform="rotate(0, 62.9921, 499.353)" x="62.9921" y="499.353">0.3</text>
</g>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1511.05,525.025 1002.14,771.42 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1511.05,525.025 629.603,442.893 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1511.05,525.025 1511.05,1232.9 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1002.14,771.42 120.702,689.288 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1002.14,771.42 1002.14,1479.3 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  629.603,442.893 120.702,689.288 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  629.603,442.893 629.603,1150.77 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  120.702,689.288 120.702,1397.17 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1511.05,1232.9 1002.14,1479.3 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1511.05,1232.9 629.603,1150.77 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  1002.14,1479.3 120.702,1397.17 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  629.603,1150.77 120.702,1397.17 
  "/>
<polyline clip-path="url(#clip0602)" style="stroke:#000000; stroke-width:4; stroke-opacity:1; fill:none" points="
  375.153,212.152 1256.6,294.284 
  "/>
<circle clip-path="url(#clip0602)" cx="1511.05" cy="525.025" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0602)" cx="1002.14" cy="771.42" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0602)" cx="629.603" cy="442.893" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0602)" cx="120.702" cy="689.288" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0602)" cx="1511.05" cy="1232.9" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0602)" cx="1002.14" cy="1479.3" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0602)" cx="629.603" cy="1150.77" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0602)" cx="120.702" cy="1397.17" r="14" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0602)" cx="375.153" cy="212.152" r="7" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip0602)" cx="1256.6" cy="294.284" r="7" fill="#800080" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
</svg>
<p>Much better, right?</p><p>Now, the array <code>r_0</code> represents a stationary body. What we want is a trajectory over time, represented by an array of functions. Our chosen trajectory will be a stationary cube with an helix rotating counter-clockwise over it.</p><p>For the cube part, we represent these as constant functions.</p><pre><code class="language-julia"># Define an array of trajectories
trajectories = Function[]
for x in r_0[1:end-2]
    push!(trajectories, let x=x; t -&gt; x;end)
end</code></pre><p>While the helix movement is done using the function <a href="../ref-quaternions/#DeformableBodies.Quaternions.rotate"><code>rotate</code></a> over a fixed axis with an angle varying over time.</p><pre><code class="language-julia">const ω = 2*π/5.0            # Angular velocity
const z_axis  = [0., 0., 1.] # Axis of rotation is orthogonal to helix

for x in r_0[end-1:end]
    push!(trajectories, let x=x; t -&gt; rotate(x, axis=z_axis, angle=ω*t); end)
end</code></pre><p>With this, we complete the code for the trajectory on the <em>body frame</em>. Let&#39;s animate it so we can see how the trajectory behaves.</p><pre><code class="language-">using Plots: @gif, Animation, frame, gif
@gif for t in 0.:0.1:7.
    plot([ x(t) for x in trajectories], bodylines=edges)
end</code></pre><p>It is now time to define the problem&#39;s model and find the trajectory on the <em>inertial frame</em>. First, we need to define some initial data.</p><pre><code class="language-julia">tstart = 0.
tend   = 5.
initial_rotation = one(Quaternion)
initial_angular_momentum = zeros(3)</code></pre><p>The variables <code>tstart</code> and <code>tend</code> define respectively the starting and ending time for the dynamics. The other two variables are the initial data necessary to solve the differential equation. The term <code>one(Quaternion)</code> is our way to represent the identity rotation, meaning that at the starting time, the inertial frame coincides with the body frame. The variable <code>initial_angular_momentum</code> is set to zero, meaning that at the beginning of the trajectory, the body has zero angular momentum from the point of view of the inertial frame.</p><p>With this information, we are ready to define our <a href="../ref-models/#DeformableBodies.Model"><code>Model</code></a>.</p><pre><code class="language-julia">model = Model( trajectories
             , tstart
             , tend
             , initial_rotation
             , initial_angular_momentum
             )</code></pre><p>Now that everything is setted up, finding the inertial frame trajectory is as simple as writing</p><pre><code class="language-julia">solve!(model)</code></pre><p>To visualize the final result, we can use the function <a href="../ref-models/#DeformableBodies.plotmodel-Tuple{Model,Any}"><code>plotmodel</code></a> to plot and save an animation of the dynamics of both frames side by side.</p><pre><code class="language-julia">plotmodel( model
         , :both
         , saveas=&quot;cubecopter.gif&quot;
         , bodylines=edges          # Only for visualization
         , duration=5.0             # Duration in seconds
         )</code></pre><p><img src="../cubecopter.gif" alt="See how it spins!"/></p><p>In the inertial frame, the cube rotates in the opposite direction to the helix guaranteeing that the total angular momentum is conserved.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../ref-quaternions/">Quaternions »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 12 March 2020 04:17">Thursday 12 March 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
